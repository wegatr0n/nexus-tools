<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Compressor - NEXUS Tools</title>
  <link rel="manifest" href="manifest.webmanifest">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    }
  </script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-4">
  <header class="w-full flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Image Compressor</h1>
    <a href="index.html" class="text-blue-400 hover:underline">&larr; Back to Home</a>
  </header>
  <div class="flex flex-col w-full max-w-3xl bg-gray-800 p-4 rounded-lg shadow">
    <input type="file" id="imageInput" accept="image/*" class="mb-4 p-2 bg-gray-700 rounded">
    <button id="compressBtn" class="p-2 bg-blue-600 rounded hover:bg-blue-700 mb-4">Compress Image</button>
    <img id="preview" class="mb-4 max-w-full rounded hidden" alt="Preview">
    <a id="downloadLink" class="text-blue-400 hover:underline hidden">Download Compressed Image</a>
    <div class="mt-4 p-2 bg-gray-700 text-center rounded">Advertisement</div>
  </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const imageInput = document.getElementById('imageInput');
  const compressBtn = document.getElementById('compressBtn');
  const previewImg = document.getElementById('preview');
  const downloadLink = document.getElementById('downloadLink');
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  let originalImage = new Image();

  imageInput.addEventListener('change', function() {
    const file = imageInput.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function() {
      originalImage = new Image();
      originalImage.onload = function() {
        previewImg.src = reader.result;
        previewImg.classList.remove('hidden');
      };
      originalImage.src = reader.result;
    };
    reader.readAsDataURL(file);
  });

  compressBtn.addEventListener('click', function() {
    if (!originalImage.src) return;
    canvas.width = originalImage.width;
    canvas.height = originalImage.height;
    ctx.drawImage(originalImage, 0, 0);
    canvas.toBlob(function(blob) {
      const compressedUrl = URL.createObjectURL(blob);
      downloadLink.href = compressedUrl;
      downloadLink.download = 'compressed.jpg';
      downloadLink.classList.remove('hidden');
      downloadLink.textContent = 'Download Compressed Image';
      previewImg.src = compressedUrl;
    }, 'image/jpeg', 0.6);
  });
});
</script>
</body>
</html>
